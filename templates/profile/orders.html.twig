{% extends 'base.html.twig' %}



{% block body %}
<h2>Mes commandes</h2>

<div class="bg-white col-md-10 mx-auto p-4 rounded border border-2 border-dark">

  <ul class="list-group list-group-horizontal">
    <li class="list-group-item list-group-item-dark w-100">Historique de commandes</li>
  </ul>

  {% if orders is empty %}
    <div class="alert alert-info mt-3">
      Vous n’avez pas encore passé de commande.
    </div>
  {% else %}
    <div class="table-responsive mt-3">
      <table class="table align-middle">
        <thead>
          <tr>
            <th>#</th>
            <th>Numéro</th>
            <th>Date</th>
            <th>Total</th>
            <th>Statut</th>
            <th></th>
          </tr>
        </thead>
        <tbody>
        {% for order in orders %}
          <tr>
            <td>{{ loop.index }}</td>
            <td>{{ order.orderNumber ?? ('#' ~ order.id|str_pad(6, '0', 'left')) }}</td>
            <td>{{ order.orderDate|date('d/m/Y H:i') }}</td>
            <td>{{ order.totalPrice|number_format(2, ',', ' ') }} €</td>
            <td>
              {% set s = order.status %}
              <span class="badge
                {% if s == 'paid' %} bg-success
                {% elseif s == 'pending' %} bg-warning text-dark
                {% elseif s == 'cancelled' %} bg-danger
                {% else %} bg-secondary {% endif %}
              ">{{ s|capitalize }}</span>
            </td>
            <td>
              <a class="btn btn-sm btn-outline-secondary"
                 href="{{ path('app_order_confirmation', {id: order.id}) }}">
                 Détails
              </a>
            </td>
          </tr>
        {% endfor %}
        </tbody>
      </table>
    </div>
  {% endif %}

  <a class="btn btn-dark w-100 mt-3" href="{{ path('app_profile_index') }}">Retour à mon compte</a>
</div>
{% endblock %}
